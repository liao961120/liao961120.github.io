<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>blogdown on Yongfu's Blog</title><link>https://yongfu.name/tags/blogdown/</link><description>Recent content in blogdown on Yongfu's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 13 Dec 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://yongfu.name/tags/blogdown/feed.xml" rel="self" type="application/rss+xml"/><item><title>Customizing Hugo / Blogdown RSS Templates</title><link>https://yongfu.name/2018/12/13/hugo_rss/</link><pubDate>Thu, 13 Dec 2018 00:00:00 +0000</pubDate><guid>https://yongfu.name/2018/12/13/hugo_rss/</guid><description>&lt;p>&lt;a href="https://github.com/rstudio/blogdown">Blogdown&lt;/a> makes it easy to create Hugo blogs or personal websites, and it is becoming more and more popular in the R community. Once the blog is created, people might want to submit their blogs&amp;rsquo; RSS feeds to &lt;a href="https://www.r-bloggers.com/">R-bloggers&lt;/a>. But before that can happen, one must modify the RSS template to meet the &lt;a href="https://www.r-bloggers.com/add-your-blog/">requirements&lt;/a> of RSS submission.&lt;/p>
&lt;p>Due to my successful experience in &lt;a href="https://yongfu.name/2018/08/02/rblogger-criteria.html">creating a new Jekyll RSS template&lt;/a> for my blog, I thought it would be easy to customize the RSS template of Hugo blogs to make it suitable for &lt;strong>R-bloggers&lt;/strong>. &lt;em>I was WRONG&lt;/em>. Hugo has stricter rules for modifying RSS templates&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, and it took me a while to figure out how to modify the &lt;strong>category/tag RSS templates&lt;/strong>.&lt;/p>
&lt;p>By default, Hugo generates different RSS feeds for each section and taxonomy&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>. I will write about how to modify &lt;em>a subset of them&lt;/em> to create category- or tag-specific RSS feeds for &lt;strong>R-bloggers&lt;/strong>, i.e, making the &lt;code>&amp;lt;description&amp;gt;&lt;/code> field of the RSS feed display &lt;strong>full content&lt;/strong>, rather than an excerpt, of a post.&lt;/p>
&lt;h2 id="overwriting-the-default-rss-template">Overwriting the default RSS Template&lt;/h2>
&lt;p>You won&amp;rsquo;t find any RSS template files shipped with Hugo themes (at least &lt;a href="https://github.com/gcushen/hugo-academic">Hugo Acadimic theme&lt;/a> doesn&amp;rsquo;t). RSS files (&lt;code>index.xml&lt;/code>) will be generated (in &lt;code>public/&lt;/code>) according to the default RSS template.&lt;/p>
&lt;p>To override the default RSS template &lt;strong>without touching the theme template&lt;/strong>,&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Copy the &lt;a href="https://gohugo.io/templates/rss/#the-embedded-rss-xml">default RSS template&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Change &lt;code>&amp;lt;description&amp;gt;{% raw %}{{ .Summary | html }}{% endraw %}&amp;lt;/description&amp;gt;&lt;/code> to &lt;code>&amp;lt;description&amp;gt;{% raw %}{{ .Content | html }}{% endraw %}&amp;lt;/description&amp;gt;&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create subdirectories in &lt;code>layouts/&lt;/code> and save the RSS template files (name them &lt;code>rss.xml&lt;/code>) in them (one for each subdirectory).&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Putting RSS templates in different subdirectories will have effects on different kind of RSS feeds. The file name (e.g. &lt;code>rss.xml&lt;/code>) of the template also matters and can&amp;rsquo;t be arbitrary. Read Hugo&amp;rsquo;s documentation on &lt;a href="https://gohugo.io/templates/rss/#lookup-order-for-rss-templates">Lookup Order for RSS Templates&lt;/a> for details&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;/p>
&lt;h2 id="an-example-hugo-acadimic-theme">An Example: Hugo Acadimic Theme&lt;/h2>
&lt;p>I use &lt;a href="https://github.com/gcushen/hugo-academic">Hugo Acadimic theme&lt;/a> as an example to set two kinds of RSS templates:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>A template that causes &lt;strong>RSS feeds under every category&lt;/strong> to display &lt;em>full content&lt;/em> of the posts&lt;/p>
&lt;ul>
&lt;li>Browse &lt;a href="https://liao961120.github.io/Hugo-RSS/categories/r/index.xml">RSS feed&lt;/a>&lt;/li>
&lt;li>GitHub source: &lt;a href="https://github.com/liao961120/Hugo-RSS/blob/master/layouts/categories/rss.xml">layouts/categories/rss.xml&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>A template with &lt;code>&amp;lt;category&amp;gt;&lt;/code> fields to capture all &lt;em>post tags&lt;/em>&lt;/p>
&lt;ul>
&lt;li>Browse &lt;a href="https://liao961120.github.io/Hugo-RSS/post/index.xml">RSS feed&lt;/a>&lt;/li>
&lt;li>GitHub source: &lt;a href="https://github.com/liao961120/Hugo-RSS/blob/master/layouts/post/rss.xml">layouts/post/rss.xml&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="directory-tree">Directory Tree&lt;/h3>
&lt;p>Below is the directory structure (simplified) after adding RSS templates to &lt;strong>Hugo Acadimic theme&lt;/strong>. I added and modified &lt;code>rss.xml&lt;/code> in &lt;code>/layouts/post/&lt;/code> and &lt;code>/layouts/categories/&lt;/code>. Then &lt;code>/docs/post/index.xml&lt;/code> and &lt;!-- raw HTML omitted -->/docs/categories/&lt;!-- raw HTML omitted -->r&lt;!-- raw HTML omitted -->/index.xml&lt;!-- raw HTML omitted --> get generated according to &lt;code>/layouts/post/rss.xml&lt;/code> and &lt;code>/layouts/categories/rss.xml&lt;/code>, respectively.&lt;/p>
&lt;p>Note that &lt;code>/docs&lt;/code> is &lt;code>/public&lt;/code> by default, when &lt;code>publishDir = &amp;quot;docs&amp;quot;&lt;/code> is not set in &lt;code>/config.toml&lt;/code>. Using &lt;code>/docs&lt;/code> allows me to &lt;a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">publish Hugo blog on GitHub Pages&lt;/a>. &lt;strong>DO NOT add &lt;code>publishDir = &amp;quot;docs&amp;quot;&lt;/code> in &lt;code>config.toml&lt;/code> if you&amp;rsquo;re serving the site with netlify&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── index.Rmd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── Hugo-RSS.Rproj&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── config.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── content/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── home/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   └── post/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      ├── 2015-07-23-r-rmarkdown.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      └── 2015-07-23-r-rmarkdown.Rmd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── layouts/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── post/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   │   └── rss.xml &lt;/span> &lt;span style="color:#75715e"># Add/Modify RSS template here&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   └── categories/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      └── rss.xml &lt;/span> &lt;span style="color:#75715e"># Add/Modify RSS template here&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">├── docs/ &lt;/span> &lt;span style="color:#75715e"># change &amp;#39;public&amp;#39; to &amp;#39;docs&amp;#39; in /config.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── index.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── index.xml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── home/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   ├── post/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   │   ├── index.xml &lt;/span> &lt;span style="color:#75715e"># set in &amp;#39;/layouts/post/rss.xml&amp;#39; &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   │   ├── index.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   │   ├── 2015-07-23-r-rmarkdown/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   │   └── 2015-07-23-r-rmarkdown_files/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│   └── categories/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      └── r/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      ├── index.xml &lt;/span> &lt;span style="color:#75715e"># set in &amp;#39;/layouts/categories/rss.xml&amp;#39; &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">│      └── index.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">└── themes/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">└── hugo-academic/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="source-code">Source Code&lt;/h3>
&lt;p>You can check out the complete directory at &lt;a href="https://github.com/liao961120/Hugo-RSS">GitHub&lt;/a> and the &lt;a href="https://liao961120.github.io/Hugo-RSS/">web page&lt;/a> generated from this repo.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>For Jekyll blogs, creating a new RSS feed is just like creating a new page in the blog, and one can even use custom file names for RSS template files (such as &lt;a href="https://github.com/liao961120/blog/blob/master/feed.rbloggers.xml">feed.rbloggers.xml&lt;/a>).&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>See &lt;a href="https://gohugo.io/templates/rss/">https://gohugo.io/templates/rss/&lt;/a> for more information.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>I have to admit that I don&amp;rsquo;t completely understand Hugo&amp;rsquo;s RSS template look up order. I can&amp;rsquo;t predict the behaviors of Hugo precisely.&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description><category>Web Page</category><category>blogdown</category><category>R-bloggers</category></item></channel></rss>